<!DOCTYPE html>
<html lang="fr" class="no-js" ng-app="webApp">
	<head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Albatros Club de Plage</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta content="Albatros Club de Plage accueille les petits et les grands tout l'été sur la grande plage de Quiberon" name="description">

		<!-- icone -->
        <link rel="shortcut icon" href="icons/favicon.ico">
        <link rel="apple-touch-icon" sizes="57x57" href="icons/apple-touch-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="114x114" href="icons/apple-touch-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="72x72" href="icons/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="144x144" href="icons/apple-touch-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="60x60" href="icons/apple-touch-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="120x120" href="icons/apple-touch-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="76x76" href="icons/apple-touch-icon-76x76.png">
        <link rel="icon" type="image/png" href="icons/favicon-96x96.png" sizes="96x96">
        <link rel="icon" type="image/png" href="icons/favicon-16x16.png" sizes="16x16">
        <link rel="icon" type="image/png" href="icons/favicon-32x32.png" sizes="32x32">
        <meta name="msapplication-TileColor" content="#f8f8f8">
        <meta name="msapplication-TileImage" content="icons/mstile-144x144.png">
        <meta name="msapplication-config" content="icons/browserconfig.xml">

        <!-- integrate css -->
        <link rel="stylesheet" href="/dist/css/albatros.css">
        <!-- integrate css -->

	</head>
	<body data-spy="scroll" data-target=".navbar">

        <div ui-view="navigation"></div>
        <div ui-view="club-plage.cover"></div>
        <div ui-view="club-plage"></div>
        <div ui-view="ecole-natation.cover"></div>
        <div ui-view="ecole-natation"></div>
        <div ui-view="remise-forme.cover"></div>
        <div ui-view="remise-forme"></div>
        <div ui-view="stand-up-paddle.cover"></div>
        <div ui-view="stand-up-paddle"></div>
        <div ui-view="equipe"></div>
        <div ui-view="contact"></div>
        <div ui-view="partenaire"></div>

        <!-- integrate js -->
        <script src="bower_components/angular/angular.js"></script>
        <script src="bower_components/angular-ui-router/release/angular-ui-router.js"></script>
        <script src="bower_components/jquery/dist/jquery.min.js"></script>
		<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
		<script src="bower_components/jquery.stellar/jquery.stellar.min.js"></script>
        <script src="bower_components/masonry/dist/masonry.pkgd.min.js"></script>
        <!-- integrate js -->

        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyARwOqZ7bqNp6Va9hiyrCxbbCVUyD1Bmxg"></script>

        <script src="dist/js/app.min.js"></script>

		<script>

            var gMap,
                gMarker,
                gDirectionsDisplay,
                gInfoWindow,
                gDirectionsService = new google.maps.DirectionsService(),
                gPositionAlbatros = new google.maps.LatLng(47.47954,-3.12005),
                contentError= '<div class="infoWindow" style="width: 200px;">'+
                            '<h4 class="text-center">Nous rejoindre</h4>'+
                            '<p class="text-center">'+
                            'Nous sommes dans l\'incapacité de trouver votre position'+
                            '</p></div>';


			// fonction de détection des appareils mobiles
			isDeviceTouch = function() {
			  return !!('ontouchstart' in document.documentElement) // works on most browsers
				  || !!('onmsgesturechange' in window); // works on ie10
			};
            isDeviceGeoloc = function() {
                return navigator.geolocation;
            };

            calcMapRoute = function(type) {
                if (!isDeviceGeoloc()) {
                    gInfoWindow.setContent(contentError);
                    return false;
                }
                gTravelMode = (type == 'foot')?google.maps.TravelMode.WALKING:( (type == 'car')?google.maps.TravelMode.DRIVING:google.maps.TravelMode.BICYCLING )
                //récupération de la position
                navigator.geolocation.getCurrentPosition(
                    // ok
                    function(position) {
                        //new google.maps.LatLng(position.coords.latitude, position.coords.longitude)
                          var request = {
                            origin:new google.maps.LatLng(position.coords.latitude, position.coords.longitude),
                            destination:gPositionAlbatros,
                            travelMode: gTravelMode
                        };
                        gDirectionsService.route(request , function(response, status) {
                            if (status == google.maps.DirectionsStatus.OK) {
                                gDirectionsDisplay.setMap(gMap);  // ajout de la route sur la map
                                gDirectionsDisplay.setDirections(response);

                            }
                        });
                    },
                    // error
                    function(error) {
                        gInfoWindow.setContent(error);
                    },
                    {enableHighAccuracy:true}
                );
            }

            // init google maps
            initializeGoogleMaps = function() {

                // création de la route
                gDirectionsDisplay = new google.maps.DirectionsRenderer();

                // création de la map
                gMap = new google.maps.Map(document.getElementById("map-canvas"), {
                    center: new google.maps.LatLng(47.48052, -3.12050),
                    zoom: 16
                });
                // création du marker
                gMarker = new google.maps.Marker({
                    position: gPositionAlbatros,
                    icon: "http://maps.google.com/mapfiles/ms/icons/blue-dot.png",
                    map: gMap,
                    title: "Club de Plage Albatros"
                });
                // création de la fenetre
                gInfoWindow = new google.maps.InfoWindow({
                  content: '<div class="infoWindow" style="width: 200px;">'+
                    '<h4 class="text-center">Nous rejoindre</h4>'+
                    '<p class="text-center">'+
                    '<button id="calcMapFoot" class="btn btn-primary btn-xs">A pied</button>&nbsp;'+
                    '<button id="calcMapBicycle" class="btn btn-primary btn-xs">A vélo</button>&nbsp;'+
                    '<button id="calcMapCar" class="btn btn-primary btn-xs">En voiture</button>&nbsp;'+
                    '</p></div>'
                });
                gInfoWindow.open(gMap, gMarker);
                google.maps.event.addListener(gMarker, 'click', function() {
                    gInfoWindow.open(gMap,gMarker);
                });
                google.maps.event.addListener(gInfoWindow, 'domready', function() {
                    $('#calcMapFoot').on('click', function() {
                        calcMapRoute('foot');
                    });
                    $('#calcMapBicycle').on('click', function() {
                        calcMapRoute('bicycle');
                    });
                    $('#calcMapCar').on('click', function() {
                        calcMapRoute('car');
                    });
                });

            };

			//////////////////////// start script ////////////////////////

			!function ($) {

                // pour les versions non mobile
				if (!isDeviceTouch()) {
					// démarrage de stellar
					$.stellar({
						horizontalScrolling: false,
						verticalScrolling: true,
						responsive: false
					});

				}

                // scrolling tout en souplesse
                $('.slowMotion').bind('click', function(e) {
                    e.preventDefault();
                    var $this = $(this),
                            target = this.hash,
                            $target = $(target);
                    $('html, body').stop().animate(
                            {'scrollTop': $target.offset().top},
                            500,
                            'swing'
                    );
                });

				// affichage du tableau de prix 1
				$('#tarifClubPlage1 a').click(function(e) {
					e.preventDefault();
					//var widthDiv = 100*parseFloat($('#tarifClubPlage1').css('width')) / parseFloat($('#tarifClubPlage1').parent().css('width'));
					$('#tarifClubPlage2').toggle();
                    $('#tarifClubPlage1 .hideMe').toggle(400);
					$('#tarifClubPlage1').toggleClass('col-sm-6');
					$('#tarifClubPlage1 a').text(($(this).text() == 'Afficher les deux tableaux') ? 'Afficher les tarifs préférentiels' : 'Afficher les deux tableaux');
				});
				// affichage du tableau de prix 2
				$('#tarifClubPlage2 a').click(function(e) {
					e.preventDefault();
					//var widthDiv = 100*parseFloat($('#tarifClubPlage2').css('width')) / parseFloat($('#tarifClubPlage2').parent().css('width'));
					$('#tarifClubPlage1').toggle();
					$('#tarifClubPlage2 .hideMe').toggle(400);
                    $('#tarifClubPlage2').toggleClass('col-sm-6');
					$('#tarifClubPlage2 a').text(($(this).text() == 'Afficher les deux tableaux') ? 'Profiter de tarifs préférentiels' : 'Afficher les deux tableaux');
				});

                // load google maps
                initializeGoogleMaps();

			}(window.jQuery)
		</script>

		<!-- google analytics -->
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-41865325-1', 'albatros-club-de-plage.fr');
			ga('send', 'pageview');
		</script>
	</body>
</html>